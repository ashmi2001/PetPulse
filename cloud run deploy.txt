Your Cloud Platform project in this session is set to petpulse-backend.
Use `gcloud config set project [PROJECT_ID]` to change to a different project.
tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud config set project petpulse-backend
Updated property [core/project].
tharunipragna327@cloudshell:~ (petpulse-backend)$ 







Welcome to Cloud Shell! Type "help" to get started.
Your Cloud Platform project in this session is set to petpulse-backend.
Use `gcloud config set project [PROJECT_ID]` to change to a different project.




tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud config set project petpulse-backend
Updated property [core/project].





tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud services enable run.googleapis.com \
    cloudbuild.googleapis.com \
    containerregistry.googleapis.com \
    iam.googleapis.com \
    logging.googleapis.com \
    monitoring.googleapis.com
ERROR: (gcloud.services.enable) FAILED_PRECONDITION: Billing account for project '1089642605933' is not found. Billing must be enabled for activation of service(s) 'run.googleapis.com,cloudbuild.googleapis.com,containerregistry.googleapis.com,artifactregistry.googleapis.com' to proceed.
Help Token: AV6GkAxi1_LNXFCC6n1SyuaqL3OvJV7cs6yQRjfsfgvwsjbH25stAUjJ9AYaoDiQmfpotmzYc5kOK60xXpTqoETLeVmSpMwRE9jGAt_46-73Ei11
- '@type': type.googleapis.com/google.rpc.PreconditionFailure
  violations:
  - subject: ?error_code=390001&project=1089642605933&services=run.googleapis.com&services=cloudbuild.googleapis.com&services=containerregistry.googleapis.com&services=artifactregistry.googleapis.com
    type: googleapis.com/billing-enabled
- '@type': type.googleapis.com/google.rpc.ErrorInfo
  domain: serviceusage.googleapis.com/billing-enabled
  metadata:
    project: '1089642605933'
    services: run.googleapis.com,cloudbuild.googleapis.com,containerregistry.googleapis.com,artifactregistry.googleapis.com
  reason: UREQ_PROJECT_BILLING_NOT_FOUND








tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud services enable run.googleapis.com     cloudbuild.googleapis.com     containerregistry.googleapis.com     iam.googleapis.com     logging.googleapis.com     monitoring.googleapis.com
Operation "operations/acf.p2-1089642605933-68fb770c-1591-4feb-96f4-334af0a54210" finished successfully.
tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud artifacts repositories create petpulse-repo \
    --repository-format=docker \
    --location=us-central1
Create request issued for: [petpulse-repo]
Waiting for operation [projects/petpulse-backend/locations/us-central1/operations/951b985e-4f9f-41b3-8918-3c52aede7400] to complete...done.                                       
Created repository [petpulse-repo].









tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud auth configure-docker
WARNING: Your config file at [/home/tharunipragna327/.docker/config.json] contains these credential helper entries:

{
  "credHelpers": {
    "gcr.io": "gcloud",
    "us.gcr.io": "gcloud",
    "eu.gcr.io": "gcloud",
    "asia.gcr.io": "gcloud",
    "staging-k8s.gcr.io": "gcloud",
    "marketplace.gcr.io": "gcloud",
    "africa-south1-docker.pkg.dev": "gcloud",
    "asia-docker.pkg.dev": "gcloud",
    "asia-east1-docker.pkg.dev": "gcloud",
    "asia-east2-docker.pkg.dev": "gcloud",
    "asia-northeast1-docker.pkg.dev": "gcloud",
    "asia-northeast2-docker.pkg.dev": "gcloud",
    "asia-northeast3-docker.pkg.dev": "gcloud",
    "asia-south1-docker.pkg.dev": "gcloud",
    "asia-south2-docker.pkg.dev": "gcloud",
    "asia-southeast1-docker.pkg.dev": "gcloud",
    "asia-southeast2-docker.pkg.dev": "gcloud",
    "australia-southeast1-docker.pkg.dev": "gcloud",
    "australia-southeast2-docker.pkg.dev": "gcloud",
    "docker.europe-west3.rep.pkg.dev": "gcloud",
    "docker.europe-west8.rep.pkg.dev": "gcloud",
    "docker.europe-west9.rep.pkg.dev": "gcloud",
    "docker.me-central2.rep.pkg.dev": "gcloud",
    "docker.us-central1.rep.pkg.dev": "gcloud",
    "docker.us-central2.rep.pkg.dev": "gcloud",
    "docker.us-east1.rep.pkg.dev": "gcloud",
    "docker.us-east4.rep.pkg.dev": "gcloud",
    "docker.us-east5.rep.pkg.dev": "gcloud",
    "docker.us-east7.rep.pkg.dev": "gcloud",
    "docker.us-south1.rep.pkg.dev": "gcloud",
    "docker.us-west1.rep.pkg.dev": "gcloud",
    "docker.us-west2.rep.pkg.dev": "gcloud",
    "docker.us-west3.rep.pkg.dev": "gcloud",
    "docker.us-west4.rep.pkg.dev": "gcloud",
    "europe-central2-docker.pkg.dev": "gcloud",
    "europe-docker.pkg.dev": "gcloud",
    "europe-north1-docker.pkg.dev": "gcloud",
    "europe-north2-docker.pkg.dev": "gcloud",
    "europe-southwest1-docker.pkg.dev": "gcloud",
    "europe-west1-docker.pkg.dev": "gcloud",
    "europe-west10-docker.pkg.dev": "gcloud",
    "europe-west12-docker.pkg.dev": "gcloud",
    "europe-west2-docker.pkg.dev": "gcloud",
    "europe-west3-docker.pkg.dev": "gcloud",
    "europe-west4-docker.pkg.dev": "gcloud",
    "europe-west6-docker.pkg.dev": "gcloud",
    "europe-west8-docker.pkg.dev": "gcloud",
    "europe-west9-docker.pkg.dev": "gcloud",
    "me-central1-docker.pkg.dev": "gcloud",
    "me-central2-docker.pkg.dev": "gcloud",
    "me-west1-docker.pkg.dev": "gcloud",
    "northamerica-northeast1-docker.pkg.dev": "gcloud",
    "northamerica-northeast2-docker.pkg.dev": "gcloud",
    "northamerica-south1-docker.pkg.dev": "gcloud",
    "southamerica-east1-docker.pkg.dev": "gcloud",
    "southamerica-west1-docker.pkg.dev": "gcloud",
    "us-central1-docker.pkg.dev": "gcloud",
    "us-central2-docker.pkg.dev": "gcloud",
    "us-docker.pkg.dev": "gcloud",
    "us-east1-docker.pkg.dev": "gcloud",
    "us-east4-docker.pkg.dev": "gcloud",
    "us-east5-docker.pkg.dev": "gcloud",
    "us-east7-docker.pkg.dev": "gcloud",
    "us-south1-docker.pkg.dev": "gcloud",
    "us-west1-docker.pkg.dev": "gcloud",
    "us-west2-docker.pkg.dev": "gcloud",
    "us-west3-docker.pkg.dev": "gcloud",
    "us-west4-docker.pkg.dev": "gcloud",
    "us-west8-docker.pkg.dev": "gcloud"
  }
}
Adding credentials for all GCR repositories.
WARNING: A long list of credential helpers may cause delays running 'docker build'. We recommend passing the registry name to configure only the registry you are using.
gcloud credential helpers already registered correctly.









tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud iam service-accounts create petpulse-deployer \
    --display-name "PetPulse Cloud Run Deployer"
Created service account [petpulse-deployer].










tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud projects add-iam-policy-binding petpulse-backend \
    --member="serviceAccount:petpulse-deployer@petpulse-backend.iam.gserviceaccount.com" \
    --role="roles/run.admin"

gcloud projects add-iam-policy-binding petpulse-backend \
    --member="serviceAccount:petpulse-deployer@petpulse-backend.iam.gserviceaccount.com" \
    --role="roles/storage.admin"
Updated IAM policy for project [petpulse-backend].
bindings:
- members:
  - serviceAccount:service-1089642605933@gcp-sa-artifactregistry.iam.gserviceaccount.com
  role: roles/artifactregistry.serviceAgent
- members:
  - serviceAccount:1089642605933@cloudbuild.gserviceaccount.com
  role: roles/cloudbuild.builds.builder
- members:
  - serviceAccount:service-1089642605933@gcp-sa-cloudbuild.iam.gserviceaccount.com
  role: roles/cloudbuild.serviceAgent
- members:
  - serviceAccount:service-1089642605933@containerregistry.iam.gserviceaccount.com
  role: roles/containerregistry.ServiceAgent
- members:
  - serviceAccount:1089642605933-compute@developer.gserviceaccount.com
  role: roles/editor
- members:
  - user:Tharunipragna327@gmail.com
  role: roles/owner
- members:
  - serviceAccount:service-1089642605933@gcp-sa-pubsub.iam.gserviceaccount.com
  role: roles/pubsub.serviceAgent
- members:
  - serviceAccount:petpulse-deployer@petpulse-backend.iam.gserviceaccount.com
  role: roles/run.admin
- members:
  - serviceAccount:service-1089642605933@serverless-robot-prod.iam.gserviceaccount.com
  role: roles/run.serviceAgent
etag: BwYwFhaBz3g=
version: 1
Updated IAM policy for project [petpulse-backend].
bindings:
- members:
  - serviceAccount:service-1089642605933@gcp-sa-artifactregistry.iam.gserviceaccount.com
  role: roles/artifactregistry.serviceAgent
- members:
  - serviceAccount:1089642605933@cloudbuild.gserviceaccount.com
  role: roles/cloudbuild.builds.builder
- members:
  - serviceAccount:service-1089642605933@gcp-sa-cloudbuild.iam.gserviceaccount.com
  role: roles/cloudbuild.serviceAgent
- members:
  - serviceAccount:service-1089642605933@containerregistry.iam.gserviceaccount.com
  role: roles/containerregistry.ServiceAgent
- members:
  - serviceAccount:1089642605933-compute@developer.gserviceaccount.com
  role: roles/editor
- members:
  - user:Tharunipragna327@gmail.com
  role: roles/owner
- members:
  - serviceAccount:service-1089642605933@gcp-sa-pubsub.iam.gserviceaccount.com
  role: roles/pubsub.serviceAgent
- members:
  - serviceAccount:petpulse-deployer@petpulse-backend.iam.gserviceaccount.com
  role: roles/run.admin
- members:
  - serviceAccount:service-1089642605933@serverless-robot-prod.iam.gserviceaccount.com
  role: roles/run.serviceAgent
- members:
  - serviceAccount:petpulse-deployer@petpulse-backend.iam.gserviceaccount.com
  role: roles/storage.admin
etag: BwYwFhao5Lk=
version: 1













tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud iam service-accounts keys create gcp-key.json \
    --iam-account=petpulse-deployer@petpulse-backend.iam.gserviceaccount.com
created key [2be9b24dd86c0b5920a5c6de745f2c9968bfcac1] of type [json] as [gcp-key.json] for [petpulse-deployer@petpulse-backend.iam.gserviceaccount.com]












tharunipragna327@cloudshell:~ (petpulse-backend)$ docker build -t gcr.io/petpulse-backend/petpulse-backend:latest .
docker push gcr.io/petpulse-backend/petpulse-backend:latest
[+] Building 0.1s (1/1) FINISHED                                                                                                                                    docker:default
 => [internal] load build definition from Dockerfile                                                                                                                          0.0s
 => => transferring dockerfile: 2B                                                                                                                                            0.0s
ERROR: failed to solve: failed to read dockerfile: open Dockerfile: no such file or directory
The push refers to repository [gcr.io/petpulse-backend/petpulse-backend]
An image does not exist locally with the tag: gcr.io/petpulse-backend/petpulse-backend













tharunipragna327@cloudshell:~ (petpulse-backend)$ pwd
/home/tharunipragna327




tharunipragna327@cloudshell:~ (petpulse-backend)$ cd ~petpulse-backend
-bash: cd: ~petpulse-backend: No such file or directory




tharunipragna327@cloudshell:~ (petpulse-backend)$ ls
gcp-key.json  README-cloudshell.txt




tharunipragna327@cloudshell:~ (petpulse-backend)$ find ~ -name "Dockerfile"




tharunipragna327@cloudshell:~ (petpulse-backend)$ nano Dockerfile





tharunipragna327@cloudshell:~ (petpulse-backend)$ ls
Dockerfile  gcp-key.json  README-cloudshell.txt





tharunipragna327@cloudshell:~ (petpulse-backend)$ docker build -t gcr.io/petpulse-backend/petpulse-backend:latest .
docker push gcr.io/petpulse-backend/petpulse-backend:latest
[+] Building 31.3s (8/9)                                                                                                                                            docker:default
 => [internal] load build definition from Dockerfile                                                                                                                          0.0s
 => => transferring dockerfile: 414B                                                                                                                                          0.0s
 => [internal] load metadata for docker.io/library/node:18                                                                                                                    0.8s
 => [internal] load .dockerignore                                                                                                                                             0.0s
 => => transferring context: 2B                                                                                                                                               0.0s
 => [1/5] FROM docker.io/library/node:18@sha256:ba756f198b4b1e0114b53b23121c8ae27f7ae4d5d95ca4a0554b0649cc9c7dcf                                                             27.1s
 => => resolve docker.io/library/node:18@sha256:ba756f198b4b1e0114b53b23121c8ae27f7ae4d5d95ca4a0554b0649cc9c7dcf                                                              0.0s
 => => sha256:40d3794e81923d1f62d6c8f4c023701def3c07b615f9de1a0c443c714f107ffb 2.49kB / 2.49kB                                                                                0.0s
 => => sha256:512bc7f93b1cd61f26c94e4f2b809fcfa90ef577db27c906c71bf1068c1afa5d 6.39kB / 6.39kB                                                                                0.0s
 => => sha256:1d281e50d3e435595c266df06531a7e8c2ebb0c185622c8ab2eed8d760e6576b 64.39MB / 64.39MB                                                                              1.6s
 => => sha256:ba756f198b4b1e0114b53b23121c8ae27f7ae4d5d95ca4a0554b0649cc9c7dcf 6.41kB / 6.41kB                                                                                0.0s
 => => sha256:155ad54a8b2812a0ec559ff82c0c6f0f0dddb337a226b11879f09e15f67b69fc 48.48MB / 48.48MB                                                                              1.6s
 => => sha256:8031108f3cda87bb32f090262d0109c8a0db99168050967becefad502e9a681b 24.06MB / 24.06MB                                                                              1.0s
 => => sha256:447713e77b4fc3658cfba0c1e816b70ff6d9bf06563dc8cfcb0459406aed33b4 211.34MB / 211.34MB                                                                            6.4s
 => => extracting sha256:155ad54a8b2812a0ec559ff82c0c6f0f0dddb337a226b11879f09e15f67b69fc                                                                                     3.8s
 => => sha256:2f9475d0583b480d241fbc3e81dccb2c8328ed6cbe28553bdcf241b4ae3c3edc 45.70MB / 45.70MB                                                                              2.5s
 => => sha256:f87facc2c491970afc16ec1d15bc7a2be960b00caa9467613baf0ac87d4e7bdf 3.32kB / 3.32kB                                                                                1.7s
 => => sha256:396e9c5702ad97405a8485ee635a41c2c4fdbb6636cec4df8bde46e611f0af68 1.25MB / 1.25MB                                                                                1.8s
 => => sha256:c8728cb69dce1bba4cb95cbaa0e0ae129482b9428acce138dcbab3176854f8d9 447B / 447B                                                                                    1.9s
 => => extracting sha256:8031108f3cda87bb32f090262d0109c8a0db99168050967becefad502e9a681b                                                                                     0.9s
 => => extracting sha256:1d281e50d3e435595c266df06531a7e8c2ebb0c185622c8ab2eed8d760e6576b                                                                                     3.8s
 => => extracting sha256:447713e77b4fc3658cfba0c1e816b70ff6d9bf06563dc8cfcb0459406aed33b4                                                                                    10.4s
 => => extracting sha256:f87facc2c491970afc16ec1d15bc7a2be960b00caa9467613baf0ac87d4e7bdf                                                                                     0.0s
 => => extracting sha256:2f9475d0583b480d241fbc3e81dccb2c8328ed6cbe28553bdcf241b4ae3c3edc                                                                                     3.3s
 => => extracting sha256:396e9c5702ad97405a8485ee635a41c2c4fdbb6636cec4df8bde46e611f0af68                                                                                     0.1s
 => => extracting sha256:c8728cb69dce1bba4cb95cbaa0e0ae129482b9428acce138dcbab3176854f8d9                                                                                     0.0s
 => [internal] load build context                                                                                                                                             0.0s
 => => transferring context: 16.86kB                                                                                                                                          0.0s
 => [2/5] WORKDIR /usr/src/app                                                                                                                                                2.3s
 => [3/5] COPY package*.json ./                                                                                                                                               0.0s
 => ERROR [4/5] RUN npm install                                                                                                                                               1.0s
------
 > [4/5] RUN npm install:
0.918 npm error code ENOENT
0.918 npm error syscall open
0.921 npm error path /usr/src/app/package.json
0.921 npm error errno -2
0.921 npm error enoent Could not read package.json: Error: ENOENT: no such file or directory, open '/usr/src/app/package.json'
0.921 npm error enoent This is related to npm not being able to find a file.
0.921 npm error enoent
0.925 npm error A complete log of this run can be found in: /root/.npm/_logs/2025-03-11T20_03_25_193Z-debug-0.log
------
Dockerfile:11
--------------------
   9 |     
  10 |     # Install dependencies
  11 | >>> RUN npm install
  12 |     
  13 |     # Copy the rest of the application
--------------------
ERROR: failed to solve: process "/bin/sh -c npm install" did not complete successfully: exit code: 254
The push refers to repository [gcr.io/petpulse-backend/petpulse-backend]
An image does not exist locally with the tag: gcr.io/petpulse-backend/petpulse-backend









tharunipragna327@cloudshell:~ (petpulse-backend)$ ls -l
total 12
-rw-rw-r-- 1 tharunipragna327 tharunipragna327  375 Mar 11 20:02 Dockerfile
-rw------- 1 tharunipragna327 tharunipragna327 2376 Mar 11 19:29 gcp-key.json
-rwxr-xr-x 1 tharunipragna327 tharunipragna327  913 Mar 11 19:00 README-cloudshell.txt







tharunipragna327@cloudshell:~ (petpulse-backend)$ nano Dockerfile








tharunipragna327@cloudshell:~ (petpulse-backend)$ docker build -t gcr.io/petpulse-backend/petpulse-backend:latest .
[+] Building 1.5s (8/9)                                                                                                                                             docker:default
 => [internal] load build definition from Dockerfile                                                                                                                          0.0s
 => => transferring dockerfile: 472B                                                                                                                                          0.0s
 => [internal] load metadata for docker.io/library/node:18                                                                                                                    0.2s
 => [internal] load .dockerignore                                                                                                                                             0.0s
 => => transferring context: 2B                                                                                                                                               0.0s
 => [1/5] FROM docker.io/library/node:18@sha256:ba756f198b4b1e0114b53b23121c8ae27f7ae4d5d95ca4a0554b0649cc9c7dcf                                                              0.0s
 => [internal] load build context                                                                                                                                             0.0s
 => => transferring context: 3.40kB                                                                                                                                           0.0s
 => CACHED [2/5] WORKDIR /usr/src/app                                                                                                                                         0.0s
 => CACHED [3/5] COPY package*.json ./                                                                                                                                        0.0s
 => ERROR [4/5] RUN npm install                                                                                                                                               1.2s
------                                                                                                                                                                             
 > [4/5] RUN npm install:
1.100 npm error code ENOENT
1.103 npm error syscall open
1.103 npm error path /usr/src/app/package.json
1.103 npm error errno -2
1.103 npm error enoent Could not read package.json: Error: ENOENT: no such file or directory, open '/usr/src/app/package.json'
1.103 npm error enoent This is related to npm not being able to find a file.
1.103 npm error enoent
1.107 npm error A complete log of this run can be found in: /root/.npm/_logs/2025-03-11T20_06_55_328Z-debug-0.log
------
Dockerfile:11
--------------------
   9 |     
  10 |     # Install dependencies
  11 | >>> RUN npm install
  12 |     
  13 |     # Copy the rest of the application (AFTER installing dependencies)
--------------------
ERROR: failed to solve: process "/bin/sh -c npm install" did not complete successfully: exit code: 254







tharunipragna327@cloudshell:~ (petpulse-backend)$ find ~ -name "package.json"







tharunipragna327@cloudshell:~ (petpulse-backend)$ npm init -y
Wrote to /home/tharunipragna327/package.json:

{
  "name": "tharunipragna327",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs"
}







tharunipragna327@cloudshell:~ (petpulse-backend)$ npm install express

added 69 packages, and audited 70 packages in 5s

14 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities











tharunipragna327@cloudshell:~ (petpulse-backend)$ docker build -t gcr.io/petpulse-backend/petpulse-backend:latest .
[+] Building 3.9s (10/10) FINISHED                                                                                                                                  docker:default
 => [internal] load build definition from Dockerfile                                                                                                                          0.0s
 => => transferring dockerfile: 472B                                                                                                                                          0.0s
 => [internal] load metadata for docker.io/library/node:18                                                                                                                    0.3s
 => [internal] load .dockerignore                                                                                                                                             0.0s
 => => transferring context: 2B                                                                                                                                               0.0s
 => [1/5] FROM docker.io/library/node:18@sha256:ba756f198b4b1e0114b53b23121c8ae27f7ae4d5d95ca4a0554b0649cc9c7dcf                                                              0.0s
 => [internal] load build context                                                                                                                                             0.4s
 => => transferring context: 7.37MB                                                                                                                                           0.4s
 => CACHED [2/5] WORKDIR /usr/src/app                                                                                                                                         0.0s
 => [3/5] COPY package*.json ./                                                                                                                                               0.1s
 => [4/5] RUN npm install                                                                                                                                                     2.4s
 => [5/5] COPY . .                                                                                                                                                            0.3s
 => exporting to image                                                                                                                                                        0.4s
 => => exporting layers                                                                                                                                                       0.4s
 => => writing image sha256:79d40dab8997f38fb79b2ea491beba238bea55039ba095d338e8d97814400440                                                                                  0.0s
 => => naming to gcr.io/petpulse-backend/petpulse-backend:latest                                                                                                              0.0s









tharunipragna327@cloudshell:~ (petpulse-backend)$ docker push gcr.io/petpulse-backend/petpulse-backend:latest
gcloud run deploy petpulse-backend \
    --image gcr.io/petpulse-backend/petpulse-backend:latest \
    --region us-central1 \
    --platform managed \
    --allow-unauthenticated
The push refers to repository [gcr.io/petpulse-backend/petpulse-backend]
6dfbbf5229cd: Pushed 
3b419016ce23: Pushed 
a64585ac21f6: Pushed 
550ef6d089fd: Pushed 
f270deee6385: Layer already exists 
e129ba4f1574: Layer already exists 
780658909072: Layer already exists 
eae0a84b6ca2: Layer already exists 
4b017a36fd9c: Layer already exists 
20a9b386e10e: Layer already exists 
f8217d7865d2: Layer already exists 
01c9a2a5f237: Layer already exists 
latest: digest: sha256:90ef0014d10249636307d1d5308a4637e11cb02b2e73040d115fb7bb9c25fc67 size: 2841
Deploying container to Cloud Run service [petpulse-backend] in project [petpulse-backend] region [us-central1]
X  Deploying new service...                                                                                                                                                       
  -  Creating Revision...                                                                                                                                                         
  .  Routing traffic...                                                                                                                                                           
  OK Setting IAM Policy...                                                                                                                                                        
Deployment failed                                                                                                                                                                 
ERROR: (gcloud.run.deploy) Revision 'petpulse-backend-00001-q2q' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.

Logs URL: https://console.cloud.google.com/logs/viewer?project=petpulse-backend&resource=cloud_run_revision/service_name/petpulse-backend/revision_name/petpulse-backend-00001-q2q&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22petpulse-backend%22%0Aresource.labels.revision_name%3D%22petpulse-backend-00001-q2q%22 
For more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start









tharunipragna327@cloudshell:~ (petpulse-backend)$ nano server.js







tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud run deploy petpulse-backend     --image gcr.io/petpulse-backend/petpulse-backend:latest     --region us-central1     --platform managed     --allow-unauthenticated
ERROR: (gcloud.run.deploy) You do not currently have an active account selected.
Please run:

  $ gcloud auth login

to obtain new credentials.

If you have already logged in with a different account, run:

  $ gcloud config set account ACCOUNT

to select an already authenticated account to use.









tharunipragna327@cloudshell:~ (petpulse-backend)$ nano Dockerfile





tharunipragna327@cloudshell:~ (petpulse-backend)$ docker build -t gcr.io/petpulse-backend/petpulse-backend:latest .
docker push gcr.io/petpulse-backend/petpulse-backend:latest
[+] Building 1.1s (10/10) FINISHED                                                                                                                                  docker:default
 => [internal] load build definition from Dockerfile                                                                                                                          0.0s
 => => transferring dockerfile: 454B                                                                                                                                          0.0s
 => [internal] load metadata for docker.io/library/node:18                                                                                                                    0.3s
 => [internal] load .dockerignore                                                                                                                                             0.0s
 => => transferring context: 2B                                                                                                                                               0.0s
 => [1/5] FROM docker.io/library/node:18@sha256:ba756f198b4b1e0114b53b23121c8ae27f7ae4d5d95ca4a0554b0649cc9c7dcf                                                              0.0s
 => [internal] load build context                                                                                                                                             0.1s
 => => transferring context: 111.09kB                                                                                                                                         0.1s
 => CACHED [2/5] WORKDIR /usr/src/app                                                                                                                                         0.0s
 => CACHED [3/5] COPY package*.json ./                                                                                                                                        0.0s
 => CACHED [4/5] RUN npm install                                                                                                                                              0.0s
 => [5/5] COPY . .                                                                                                                                                            0.3s
 => exporting to image                                                                                                                                                        0.3s
 => => exporting layers                                                                                                                                                       0.3s
 => => writing image sha256:3384869874089830a687dd6f73dba95f87352f5cd40cb5f58ac158f247c2b63a                                                                                  0.0s
 => => naming to gcr.io/petpulse-backend/petpulse-backend:latest                                                                                                              0.0s
The push refers to repository [gcr.io/petpulse-backend/petpulse-backend]
3cfb431f381b: Preparing 
3b419016ce23: Preparing 
a64585ac21f6: Preparing 
550ef6d089fd: Preparing 
f270deee6385: Preparing 
e129ba4f1574: Waiting 
780658909072: Waiting 
eae0a84b6ca2: Waiting 
4b017a36fd9c: Waiting 
20a9b386e10e: Waiting 
f8217d7865d2: Waiting 
01c9a2a5f237: Waiting 
denied: Unauthenticated request. Unauthenticated requests do not have permission "artifactregistry.repositories.uploadArtifacts" on resource "projects/petpulse-backend/locations/us/repositories/gcr.io" (or it may not exist)










tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud auth login

You are already authenticated with gcloud when running
inside the Cloud Shell and so do not need to run this
command. Do you wish to proceed anyway?

Do you want to continue (Y/n)?  y

Go to the following link in your browser, and complete the sign-in prompts:

    https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=32555940559.apps.googleusercontent.com&redirect_uri=https%3A%2F%2Fsdk.cloud.google.com%2Fauthcode.html&scope=openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcloud-platform+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fappengine.admin+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fsqlservice.login+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcompute+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Faccounts.reauth&state=NfonJ0cDUOWnFZM0JkPyTUaV66nIFa&prompt=consent&token_usage=remote&access_type=offline&code_challenge=OBS-4P-MSU0Wg5imlg6Blo4YiJpvMRuMrkievFEKS1g&code_challenge_method=S256

Once finished, enter the verification code provided in your browser: 4/0AQSTgQFA-hv3zTElaU0-_IDxYw2kneErSVi4AE1YgKSDAKyNL4E_lgQwvTCW3OM4x7Yh7Q

You are now logged in as [tharunipragna327@gmail.com].
Your current project is [petpulse-backend].  You can change this setting by running:
  $ gcloud config set project PROJECT_ID











tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud auth configure-docker
WARNING: Your config file at [/home/tharunipragna327/.docker/config.json] contains these credential helper entries:

{
  "credHelpers": {
    "gcr.io": "gcloud",
    "us.gcr.io": "gcloud",
    "eu.gcr.io": "gcloud",
    "asia.gcr.io": "gcloud",
    "staging-k8s.gcr.io": "gcloud",
    "marketplace.gcr.io": "gcloud",
    "africa-south1-docker.pkg.dev": "gcloud",
    "asia-docker.pkg.dev": "gcloud",
    "asia-east1-docker.pkg.dev": "gcloud",
    "asia-east2-docker.pkg.dev": "gcloud",
    "asia-northeast1-docker.pkg.dev": "gcloud",
    "asia-northeast2-docker.pkg.dev": "gcloud",
    "asia-northeast3-docker.pkg.dev": "gcloud",
    "asia-south1-docker.pkg.dev": "gcloud",
    "asia-south2-docker.pkg.dev": "gcloud",
    "asia-southeast1-docker.pkg.dev": "gcloud",
    "asia-southeast2-docker.pkg.dev": "gcloud",
    "australia-southeast1-docker.pkg.dev": "gcloud",
    "australia-southeast2-docker.pkg.dev": "gcloud",
    "docker.europe-west3.rep.pkg.dev": "gcloud",
    "docker.europe-west8.rep.pkg.dev": "gcloud",
    "docker.europe-west9.rep.pkg.dev": "gcloud",
    "docker.me-central2.rep.pkg.dev": "gcloud",
    "docker.us-central1.rep.pkg.dev": "gcloud",
    "docker.us-central2.rep.pkg.dev": "gcloud",
    "docker.us-east1.rep.pkg.dev": "gcloud",
    "docker.us-east4.rep.pkg.dev": "gcloud",
    "docker.us-east5.rep.pkg.dev": "gcloud",
    "docker.us-east7.rep.pkg.dev": "gcloud",
    "docker.us-south1.rep.pkg.dev": "gcloud",
    "docker.us-west1.rep.pkg.dev": "gcloud",
    "docker.us-west2.rep.pkg.dev": "gcloud",
    "docker.us-west3.rep.pkg.dev": "gcloud",
    "docker.us-west4.rep.pkg.dev": "gcloud",
    "europe-central2-docker.pkg.dev": "gcloud",
    "europe-docker.pkg.dev": "gcloud",
    "europe-north1-docker.pkg.dev": "gcloud",
    "europe-north2-docker.pkg.dev": "gcloud",
    "europe-southwest1-docker.pkg.dev": "gcloud",
    "europe-west1-docker.pkg.dev": "gcloud",
    "europe-west10-docker.pkg.dev": "gcloud",
    "europe-west12-docker.pkg.dev": "gcloud",
    "europe-west2-docker.pkg.dev": "gcloud",
    "europe-west3-docker.pkg.dev": "gcloud",
    "europe-west4-docker.pkg.dev": "gcloud",
    "europe-west6-docker.pkg.dev": "gcloud",
    "europe-west8-docker.pkg.dev": "gcloud",
    "europe-west9-docker.pkg.dev": "gcloud",
    "me-central1-docker.pkg.dev": "gcloud",
    "me-central2-docker.pkg.dev": "gcloud",
    "me-west1-docker.pkg.dev": "gcloud",
    "northamerica-northeast1-docker.pkg.dev": "gcloud",
    "northamerica-northeast2-docker.pkg.dev": "gcloud",
    "northamerica-south1-docker.pkg.dev": "gcloud",
    "southamerica-east1-docker.pkg.dev": "gcloud",
    "southamerica-west1-docker.pkg.dev": "gcloud",
    "us-central1-docker.pkg.dev": "gcloud",
    "us-central2-docker.pkg.dev": "gcloud",
    "us-docker.pkg.dev": "gcloud",
    "us-east1-docker.pkg.dev": "gcloud",
    "us-east4-docker.pkg.dev": "gcloud",
    "us-east5-docker.pkg.dev": "gcloud",
    "us-east7-docker.pkg.dev": "gcloud",
    "us-south1-docker.pkg.dev": "gcloud",
    "us-west1-docker.pkg.dev": "gcloud",
    "us-west2-docker.pkg.dev": "gcloud",
    "us-west3-docker.pkg.dev": "gcloud",
    "us-west4-docker.pkg.dev": "gcloud",
    "us-west8-docker.pkg.dev": "gcloud"
  }
}
Adding credentials for all GCR repositories.
WARNING: A long list of credential helpers may cause delays running 'docker build'. We recommend passing the registry name to configure only the registry you are using.
gcloud credential helpers already registered correctly.











tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud auth application-default login

You are running on a Google Compute Engine virtual machine.
The service credentials associated with this virtual machine
will automatically be used by Application Default
Credentials, so it is not necessary to use this command.

If you decide to proceed anyway, your user credentials may be visible
to others with access to this virtual machine. Are you sure you want
to authenticate with your personal account?

Do you want to continue (Y/n)?  y

Go to the following link in your browser, and complete the sign-in prompts:

    https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com&redirect_uri=https%3A%2F%2Fsdk.cloud.google.com%2Fapplicationdefaultauthcode.html&scope=openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcloud-platform+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fsqlservice.login&state=qPeys15HwEX6L8J2cHAzo2k8dUkK5i&prompt=consent&token_usage=remote&access_type=offline&code_challenge=I8sMmQ0K1Lay4nM2qYMC_RkKWtOA-WiclngKM4L48IA&code_challenge_method=S256

Once finished, enter the verification code provided in your browser: 4/0AQSTgQENIFwoWGgd5Yu3mVrYoxq0IyAbAcKMyPVsCNnZPUf6xLy8q7ibMDxyChNYxtf2Jw

Credentials saved to file: [/tmp/tmp.ODVJW16KEH/application_default_credentials.json]

These credentials will be used by any library that requests Application Default Credentials (ADC).
API [cloudresourcemanager.googleapis.com] not enabled on project [petpulse-backend]. Would you like to enable and retry (this will take a few minutes)? (y/N)?  y

Enabling service [cloudresourcemanager.googleapis.com] on project [petpulse-backend]...
Operation "operations/acat.p2-1089642605933-ce0faf06-1345-40fd-9c78-d2ba64b6b202" finished successfully.

Quota project "petpulse-backend" was added to ADC which can be used by Google client libraries for billing and quota. Note that some services may still bill the project owning the resource.












tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud projects get-iam-policy petpulse-backend
bindings:
- members:
  - serviceAccount:service-1089642605933@gcp-sa-artifactregistry.iam.gserviceaccount.com
  role: roles/artifactregistry.serviceAgent
- members:
  - serviceAccount:1089642605933@cloudbuild.gserviceaccount.com
  role: roles/cloudbuild.builds.builder
- members:
  - serviceAccount:service-1089642605933@gcp-sa-cloudbuild.iam.gserviceaccount.com
  role: roles/cloudbuild.serviceAgent
- members:
  - serviceAccount:service-1089642605933@containerregistry.iam.gserviceaccount.com
  role: roles/containerregistry.ServiceAgent
- members:
  - serviceAccount:1089642605933-compute@developer.gserviceaccount.com
  role: roles/editor
- members:
  - user:Tharunipragna327@gmail.com
  role: roles/owner
- members:
  - serviceAccount:service-1089642605933@gcp-sa-pubsub.iam.gserviceaccount.com
  role: roles/pubsub.serviceAgent
- members:
  - serviceAccount:petpulse-deployer@petpulse-backend.iam.gserviceaccount.com
  role: roles/run.admin
- members:
  - serviceAccount:service-1089642605933@serverless-robot-prod.iam.gserviceaccount.com
  role: roles/run.serviceAgent
- members:
  - serviceAccount:petpulse-deployer@petpulse-backend.iam.gserviceaccount.com
  role: roles/storage.admin
etag: BwYwFhao5Lk=
version: 1










tharunipragna327@cloudshell:~ (petpulse-backend)$ docker build -t gcr.io/petpulse-backend/petpulse-backend:latest .
docker push gcr.io/petpulse-backend/petpulse-backend:latest
[+] Building 0.9s (10/10) FINISHED                                                                                                                                  docker:default
 => [internal] load build definition from Dockerfile                                                                                                                          0.0s
 => => transferring dockerfile: 454B                                                                                                                                          0.0s
 => [internal] load metadata for docker.io/library/node:18                                                                                                                    0.2s
 => [internal] load .dockerignore                                                                                                                                             0.0s
 => => transferring context: 2B                                                                                                                                               0.0s
 => [1/5] FROM docker.io/library/node:18@sha256:ba756f198b4b1e0114b53b23121c8ae27f7ae4d5d95ca4a0554b0649cc9c7dcf                                                              0.0s
 => [internal] load build context                                                                                                                                             0.1s
 => => transferring context: 110.68kB                                                                                                                                         0.1s
 => CACHED [2/5] WORKDIR /usr/src/app                                                                                                                                         0.0s
 => CACHED [3/5] COPY package*.json ./                                                                                                                                        0.0s
 => CACHED [4/5] RUN npm install                                                                                                                                              0.0s
 => [5/5] COPY . .                                                                                                                                                            0.3s
 => exporting to image                                                                                                                                                        0.3s
 => => exporting layers                                                                                                                                                       0.3s
 => => writing image sha256:c7ef66ab7d8bc91c506f7cb6796a8de114d3d723199417e49fb2cd4bcadaf6e6                                                                                  0.0s
 => => naming to gcr.io/petpulse-backend/petpulse-backend:latest                                                                                                              0.0s
The push refers to repository [gcr.io/petpulse-backend/petpulse-backend]
d1806b37fa60: Pushed 
3b419016ce23: Layer already exists 
a64585ac21f6: Layer already exists 
550ef6d089fd: Layer already exists 
f270deee6385: Layer already exists 
e129ba4f1574: Layer already exists 
780658909072: Layer already exists 
eae0a84b6ca2: Layer already exists 
4b017a36fd9c: Layer already exists 
20a9b386e10e: Layer already exists 
f8217d7865d2: Layer already exists 
01c9a2a5f237: Layer already exists 
latest: digest: sha256:3bd17c91db24efae699c6c8341add00d71a033b83139429a24578b9e9e86577e size: 2841









tharunipragna327@cloudshell:~ (petpulse-backend)$ gcloud run deploy petpulse-backend \
    --image gcr.io/petpulse-backend/petpulse-backend:latest \
    --region us-central1 \
    --platform managed \
    --allow-unauthenticated
Deploying container to Cloud Run service [petpulse-backend] in project [petpulse-backend] region [us-central1]
OK Deploying... Done.                                                                                                                                                             
  OK Creating Revision...                                                                                                                                                         
  OK Routing traffic...                                                                                                                                                           
  OK Setting IAM Policy...                                                                                                                                                        
Done.                                                                                                                                                                             
Service [petpulse-backend] revision [petpulse-backend-00002-cfz] has been deployed and is serving 100 percent of traffic.
Service URL: https://petpulse-backend-1089642605933.us-central1.run.app









tharunipragna327@cloudshell:~ (petpulse-backend)$ 